import{f as t}from"./index.a3f35e3a.js";import{a as i,b as g,c as o}from"./wx_oa.86b674ff.js";import{s as d,r as c,Z as h}from"./@vue.50ba5cf8.js";const s=d(),u=c([]),n=c(0),A=h({name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]},{min:1,max:12,message:"\u957F\u5EA6\u9650\u523612\u4E2A\u5B57\u7B26",trigger:["blur","change"]}],menuType:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]}],visitType:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]}],url:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]},{pattern:/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,message:"\u8BF7\u8F93\u5165\u5408\u6CD5\u7684\u7F51\u5740\u94FE\u63A5",trigger:["blur","change"]}],appId:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]}],pagePath:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:["blur","change"]}]}),O=l=>(l&&(s.value=l),{menuList:u,menuIndex:n,handleAddMenu:()=>{u.value.push({name:"\u83DC\u5355\u540D\u79F0",menuType:1,visitType:"view",url:"",appId:"",pagePath:"",subButtons:[]})},handleAddSubMenu:a=>{const e=n.value;if(u.value[e].subButtons.length>=5){t.msgError("\u5DF2\u6DFB\u52A0\u4E0A\u9650\uFF5E");return}u.value[e].subButtons.push(a)},handleEditSubMenu:(a,e)=>{const r=n.value;u.value[r].subButtons[e]=a},handleDelMenu:a=>{u.value.splice(a,1)},handleDelSubMenu:(a,e)=>{u.value[a].subButtons.splice(e,1)},getOaMenuFunc:async()=>{try{u.value=await i()}catch(a){console.log("\u83B7\u53D6\u83DC\u5355=>",a)}},handleSave:async()=>{const a=s.value.value;for(let e=0;e<a.length;e++)try{await a[e].menuFormRef.validate()}catch{n.value=e;return}await g(u.value),t.msgSuccess("\u4FDD\u5B58\u6210\u529F")},handlePublish:async()=>{const a=s.value.value;for(let e=0;e<a.length;e++)try{await a[e].menuFormRef.validate()}catch{n.value=e;return}await o(u.value),t.msgSuccess("\u53D1\u5E03\u6210\u529F")}});export{A as r,O as u};
