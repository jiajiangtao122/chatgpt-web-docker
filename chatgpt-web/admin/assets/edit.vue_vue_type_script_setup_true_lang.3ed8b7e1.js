import{I as x,J as R,D as w,C as U,F as q}from"./element-plus.5631ba54.js";import{g as N,a as S}from"./type.fe57bcfd.js";import{r as g,f as L}from"./index.6cd0825e.js";import{P as O}from"./index.fbcdb2b3.js";import{u as P}from"./useDictOptions.a59d9376.js";import{d as A,r as J,s as f,Z as K,o as m,c as _,U as s,L as u,u as o,T as Z,a9 as j,K as z,a as y}from"./@vue.50ba5cf8.js";function ae(n){return g.get({url:"/card-order/list",params:n})}function G(n){return g.post({url:"/card-order/create",params:n})}const H={class:"edit-popup"},M={class:"flex-1"},le=A({__name:"edit",emits:["success"],setup(n,{expose:F,emit:b}){const k=J("add"),p=f(),c=f(),e=K({typeID:"",typeName:"",price:"",desc:"",askTimes:""}),C={typeID:[{required:!0,message:"\u8BF7\u9009\u62E9\u5957\u9910",trigger:"blur"}],price:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EF7\u683C",trigger:"blur"}],askTimes:[{required:!0,message:"\u8BF7\u8F93\u5165\u5305\u542B\u6B21\u6570",trigger:"blur"}]},{optionsData:v}=P({cardTypes:{api:N}}),V=l=>{e.typeID=l.id,e.typeName=l.name,e.price=l.price,e.askTimes=l.askTimes,e.desc=l.desc},D=async l=>{const a=await S({id:l.id});for(const r in e)a[r]!=null&&a[r]!=null&&(e[r]=a[r])},T=async()=>{var l,a;console.log(e),await((l=p.value)==null?void 0:l.validate()),await G(e),(a=c.value)==null||a.close(),b("success"),L.msgSuccess("\u64CD\u4F5C\u6210\u529F")},B=(l="add")=>{var a;k.value=l,(a=c.value)==null||a.open()},E=()=>{var l;(l=p.value)==null||l.resetFields()};return F({open:B,setFormData:D}),(l,a)=>{const r=x,I=R,d=w,i=U,h=q;return m(),_("div",H,[s(O,{ref_key:"popupRef",ref:c,async:!0,title:"\u5361\u5238",width:"550px",onClose:E,onConfirm:T},{default:u(()=>[s(h,{ref_key:"formRef",ref:p,model:o(e),rules:C,"label-width":"100px"},{default:u(()=>[s(d,{label:"\u5957\u9910",prop:"typeID"},{default:u(()=>[s(I,{class:"min-w-[100%]",modelValue:o(e).typeID,"onUpdate:modelValue":a[0]||(a[0]=t=>o(e).typeID=t),placeholder:"\u8BF7\u9009\u62E9\u5957\u9910",clearable:"","value-key":"id",onChange:V},{default:u(()=>[(m(!0),_(Z,null,j(o(v).cardTypes,t=>(m(),z(r,{key:t.id,label:t.name,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(d,{label:"\u4EF7\u683C",prop:"price"},{default:u(()=>[s(i,{modelValue:o(e).price,"onUpdate:modelValue":a[1]||(a[1]=t=>o(e).price=t),clearable:"",placeholder:""},null,8,["modelValue"])]),_:1}),s(d,{label:"\u6B21\u6570",prop:"askTimes"},{default:u(()=>[s(i,{modelValue:o(e).askTimes,"onUpdate:modelValue":a[2]||(a[2]=t=>o(e).askTimes=t),clearable:"",placeholder:""},null,8,["modelValue"])]),_:1}),s(d,{label:"\u63CF\u8FF0",prop:"desc"},{default:u(()=>[y("div",M,[y("div",null,[s(i,{modelValue:o(e).desc,"onUpdate:modelValue":a[3]||(a[3]=t=>o(e).desc=t),rows:4,clearable:"",placeholder:"",type:"textarea"},null,8,["modelValue"])])])]),_:1})]),_:1},8,["model"])]),_:1},512)])}}});export{le as _,ae as g};
